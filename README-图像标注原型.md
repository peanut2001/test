# 医学图像标注原型系统

## 概述

这是一个基于HTML+CSS+JavaScript开发的医学图像标注原型系统，实现了您提出的三栏布局设计和图像标注功能需求。

## 功能特性

### 🎯 核心功能

1. **三栏布局设计**
   - 左栏：任务输入区（临床问题输入 + 图像上传）
   - 中栏：图像标注区（影像展示 + 标注工具）
   - 右栏：标注管理与设置

2. **图像上传与管理**
   - 支持点击上传和拖拽上传
   - 支持多种格式：JPG, PNG, DICOM等
   - 缩略图预览和切换
   - 图像删除功能

3. **标注工具**
   - 🖱️ 选择工具：默认选择模式
   - ⬜ 矩形标注：框选病灶区域
   - ➡️ 箭头指向：指向特定特征
   - 📝 文本标签：添加文字说明
   - 🖊️ 画笔轮廓：勾勒不规则形状（预留）

4. **标注管理**
   - 自动编号：每个标注自动分配唯一ID
   - 标注列表：显示所有标注项
   - 交互高亮：鼠标悬停时高亮对应标注
   - 编辑删除：支持标注的编辑和删除

### 🔗 标注管理

系统实现了完整的图像标注管理功能：

1. **自动编号**：每个标注自动获得唯一ID（如 #1, #2, #3）
2. **标注列表**：右侧面板显示所有标注项
3. **交互高亮**：
   - 鼠标悬停标注 → 图像标注高亮
   - 鼠标悬停标注列表项 → 对应图像标注高亮

## 工作流程 📋

### 1. 输入临床问题（可选）
在左栏的文本框中输入患者的临床症状描述。

### 2. 上传医学图像
- 点击"上传影像/报告"按钮选择文件
- 或直接拖拽图像文件到上传区域
- 支持上传多张图像

### 3. 手动标注 ✏️
**使用标注工具对图像进行标注：**
- **矩形标注**：按住鼠标拖拽绘制矩形框
- **箭头标注**：点击图像位置放置箭头
- **文本标注**：点击位置后输入文本内容

### 4. 标注管理
- **编辑标注**：点击标注列表中的编辑按钮
- **删除标注**：点击删除按钮移除标注
- **高亮查看**：悬停或点击标注项查看对应位置

## 标注样式说明

### 医师标注 👨‍⚕️
- **颜色**：绿色（#4CAF50）
- **样式**：实线边框
- **标识**：#1, #2, #3...
- **操作**：可编辑、删除

## 技术实现

### 前端技术栈
- **HTML5**：页面结构
- **CSS3**：样式设计和响应式布局
- **JavaScript ES6**：交互逻辑和标注功能
- **Canvas API**：图像标注绘制
- **File API**：文件上传处理

### 核心类设计
```javascript
class ImageAnnotationSystem {
    // 主要属性
    - currentTool: 当前选择的标注工具
    - annotations: 所有标注数据
    - uploadedImages: 上传的图像列表
    - canvas/ctx: Canvas绘图上下文

    // 主要方法
    - handleFileUpload(): 处理文件上传
    - showImage(): 显示指定图像
    - addAnnotation(): 添加新标注
    - drawAnnotation(): 绘制标注
    - updateAnnotationList(): 更新标注列表
}
```

### 数据结构
```javascript
// 标注数据结构
{
    id: 1,                    // 唯一标识
    type: 'rectangle',        // 标注类型
    startX: 100, startY: 50,  // 起始坐标
    endX: 200, endY: 150,     // 结束坐标
    text: '可疑结节',          // 文本内容（文本标注）
    imageIndex: 0             // 所属图像索引
}
```

## 响应式设计

系统支持多种屏幕尺寸：
- **桌面端**（>1200px）：完整三栏布局
- **平板端**（768px-1200px）：调整栏宽比例
- **移动端**（<768px）：垂直堆叠布局

## 文件结构

```
image-annotation-prototype.html  # 主要原型文件
README-图像标注原型.md          # 使用说明文档
```

## 扩展建议

1. **数据持久化**：保存标注数据到数据库
2. **用户权限**：添加用户登录和权限管理
3. **导出功能**：支持标注数据和报告导出
4. **协作功能**：多用户协作标注
5. **更多标注工具**：椭圆、多边形、测量工具等
6. **分析功能**：集成图像分析算法

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 注意事项

1. 这是一个原型系统，专注于图像标注功能
2. 图像处理基于前端Canvas，大图像可能影响性能
3. 标注数据仅保存在浏览器内存中，刷新页面会丢失
4. 建议使用现代浏览器以获得最佳体验

---

**开发完成时间**：2025年7月2日
**技术栈**：HTML5 + CSS3 + JavaScript ES6
**设计模式**：面向对象编程 + 事件驱动架构
