<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>医学图像数据采集管理系统</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
</head>

<body>
    <div class="admin-layout">
        <!-- 侧边栏 -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="logo">
                    <i class="fas fa-stethoscope"></i>
                    <span class="logo-text">医学图像系统</span>
                </div>
                <button class="sidebar-toggle" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>

            <nav class="sidebar-nav">
                <ul class="nav-menu">
                    <li class="nav-item">
                        <a href="#dashboard" class="nav-link active" data-page="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span class="nav-text">仪表盘</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#data-collection" class="nav-link" data-page="data-collection">
                            <i class="fas fa-upload"></i>
                            <span class="nav-text">数据采集</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#data-management" class="nav-link" data-page="data-management">
                            <i class="fas fa-database"></i>
                            <span class="nav-text">数据管理</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#image-analysis" class="nav-link" data-page="image-analysis">
                            <i class="fas fa-search"></i>
                            <span class="nav-text">图像分析</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#diagnosis-review" class="nav-link" data-page="diagnosis-review">
                            <i class="fas fa-clipboard-check"></i>
                            <span class="nav-text">诊断审核</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#model-scoring" class="nav-link" data-page="model-scoring">
                            <i class="fas fa-star"></i>
                            <span class="nav-text">模型评分</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#reports" class="nav-link" data-page="reports">
                            <i class="fas fa-chart-bar"></i>
                            <span class="nav-text">统计报告</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="#settings" class="nav-link" data-page="settings">
                            <i class="fas fa-cog"></i>
                            <span class="nav-text">系统设置</span>
                        </a>
                    </li>
                </ul>
            </nav>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <i class="fas fa-user-md"></i>
                    </div>
                    <div class="user-details">
                        <span class="user-name">张医生</span>
                        <span class="user-role">主治医师</span>
                    </div>
                </div>
            </div>
        </aside>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 顶部导航栏 -->
            <header class="top-header">
                <div class="header-left">
                    <button class="mobile-menu-btn" id="mobileMenuBtn">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 class="page-title" id="pageTitle">仪表盘</h1>
                </div>

                <div class="header-right">
                    <div class="header-actions">
                        <button class="header-btn" title="通知">
                            <i class="fas fa-bell"></i>
                            <span class="badge">3</span>
                        </button>
                        <button class="header-btn" title="消息">
                            <i class="fas fa-envelope"></i>
                        </button>
                        <div class="user-menu">
                            <button class="user-menu-btn">
                                <img src="https://via.placeholder.com/32x32/4CAF50/ffffff?text=张" alt="用户头像"
                                    class="user-avatar-small">
                                <span class="user-name-small">张医生</span>
                                <i class="fas fa-chevron-down"></i>
                            </button>
                            <div class="user-dropdown">
                                <a href="#profile" class="dropdown-item">
                                    <i class="fas fa-user"></i> 个人资料
                                </a>
                                <a href="#preferences" class="dropdown-item">
                                    <i class="fas fa-cog"></i> 偏好设置
                                </a>
                                <div class="dropdown-divider"></div>
                                <a href="#logout" class="dropdown-item">
                                    <i class="fas fa-sign-out-alt"></i> 退出登录
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </header>

            <!-- 页面内容容器 -->
            <div class="content-wrapper">
                <!-- 仪表盘页面 -->
                <div id="dashboard-page" class="page-content active">
                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-images"></i>
                            </div>
                            <div class="stat-info">
                                <h3>1,234</h3>
                                <p>总图像数量</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-info">
                                <h3>856</h3>
                                <p>已完成诊断</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-info">
                                <h3>378</h3>
                                <p>待处理</p>
                            </div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">
                                <i class="fas fa-user-md"></i>
                            </div>
                            <div class="stat-info">
                                <h3>12</h3>
                                <p>在线医生</p>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-charts">
                        <div class="chart-card">
                            <h3>诊断类型分布</h3>
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-pie"></i>
                                <p>图表区域</p>
                            </div>
                        </div>
                        <div class="chart-card">
                            <h3>每日处理量</h3>
                            <div class="chart-placeholder">
                                <i class="fas fa-chart-line"></i>
                                <p>图表区域</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 数据采集页面 -->
                <div id="data-collection-page" class="page-content">
                    <div class="page-header">
                        <h2>医学图像数据采集</h2>
                        <p class="page-description">支持乳腺超声、CT、MRI、X光等医学图像的结构化诊断数据采集</p>
                    </div>

                    <form id="medicalDataForm" class="data-form">
                        <!-- 图像上传区域 -->
                        <section class="form-section">
                            <h2><i class="fas fa-upload"></i> 图像文件上传</h2>
                            <div class="upload-area" id="uploadArea">
                                <div class="upload-placeholder">
                                    <i class="fas fa-cloud-upload-alt"></i>
                                    <p>点击或拖拽上传医学图像</p>
                                    <p class="file-types">支持格式：JPG, PNG, DICOM, AVI</p>
                                </div>
                                <input type="file" id="imageInput" accept=".jpg,.jpeg,.png,.dcm,.dicom,.avi" hidden>
                                <div class="image-preview" id="imagePreview" style="display: none;">
                                    <img id="previewImg" src="" alt="预览图像">
                                    <div class="image-info">
                                        <span id="fileName"></span>
                                        <button type="button" class="remove-btn" id="removeImage">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- 基础信息录入 -->
                        <section class="form-section">
                            <h2><i class="fas fa-info-circle"></i> 基础信息</h2>
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="bodyPart">检查部位</label>
                                    <select id="bodyPart" name="bodyPart" required>
                                        <option value="">请选择检查部位</option>
                                        <option value="breast">乳腺</option>
                                        <option value="thyroid">甲状腺</option>
                                        <option value="liver">肝脏</option>
                                        <option value="kidney">肾脏</option>
                                        <option value="heart">心脏</option>
                                        <option value="lung">肺部</option>
                                        <option value="abdomen">腹部</option>
                                        <option value="pelvis">盆腔</option>
                                        <option value="other">其他</option>
                                    </select>
                                </div>

                                <div class="form-group">
                                    <label for="crossSection">切面类型</label>
                                    <select id="crossSection" name="crossSection" required>
                                        <option value="">请选择切面类型</option>
                                        <option value="sagittal">矢状面</option>
                                        <option value="coronal">冠状面</option>
                                        <option value="axial">横断面</option>
                                        <option value="oblique">斜切面</option>
                                        <option value="longitudinal">纵切面</option>
                                        <option value="transverse">横切面</option>
                                    </select>
                                </div>
                            </div>
                        </section>

                        <!-- 标注管理选项 -->
                        <section class="form-section" id="annotationSection" style="display: none;">
                            <h2><i class="fas fa-edit"></i> 标注管理</h2>
                            <div class="annotation-option">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="enableAnnotation" name="enableAnnotation">
                                    <span class="checkbox-custom"></span>
                                    <span class="checkbox-text">进行图像标注</span>
                                </label>
                                <p class="option-description">选择此项将打开标注工具，可以在图像上标记病灶区域</p>
                            </div>

                            <!-- 标注工具区域 -->
                            <div class="annotation-tools" id="annotationTools" style="display: none;">
                                <div class="form-group">
                                    <label for="lesionType">病灶类型</label>
                                    <select id="lesionType" name="lesionType">
                                        <option value="">请选择病灶类型</option>
                                        <option value="nodule">结节</option>
                                        <option value="mass">肿块</option>
                                        <option value="cyst">囊肿</option>
                                        <option value="calcification">钙化</option>
                                        <option value="inflammation">炎症</option>
                                        <option value="other">其他</option>
                                    </select>
                                </div>
                                <div class="annotation-hint">
                                    <i class="fas fa-info-circle"></i>
                                    <span>请在上传的图像上使用标注工具标记相应的病灶区域</span>
                                </div>
                            </div>
                        </section>

                        <!-- 图像特征分析 -->
                        <section class="form-section">
                            <div class="section-header">
                                <h2><i class="fas fa-search"></i> 图像特征分析</h2>
                                <button type="button" class="add-item-btn" id="addFeatureBtn">
                                    <i class="fas fa-plus"></i> 添加特征
                                </button>
                            </div>
                            <div class="tags-container" id="featuresContainer">
                                <!-- 预设一些常见特征 -->
                                <div class="tag-item" data-category="features">
                                    <span class="tag-text">边界清晰</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="tag-item" data-category="features">
                                    <span class="tag-text">回声均匀</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="tag-item" data-category="features">
                                    <span class="tag-text">形态规则</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tag-input-group" id="featureInputGroup" style="display: none;">
                                <input type="text" class="tag-input" placeholder="输入图像特征描述" maxlength="50">
                                <button type="button" class="tag-confirm-btn">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button type="button" class="tag-cancel-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="preset-tags">
                                <span class="preset-label">常用特征：</span>
                                <button type="button" class="preset-tag" data-text="低回声区">低回声区</button>
                                <button type="button" class="preset-tag" data-text="高回声区">高回声区</button>
                                <button type="button" class="preset-tag" data-text="混合回声">混合回声</button>
                                <button type="button" class="preset-tag" data-text="边界模糊">边界模糊</button>
                                <button type="button" class="preset-tag" data-text="钙化灶">钙化灶</button>
                                <button type="button" class="preset-tag" data-text="血流信号">血流信号</button>
                            </div>
                        </section>

                        <!-- 诊断联想 -->
                        <section class="form-section">
                            <div class="section-header">
                                <h2><i class="fas fa-brain"></i> 诊断联想</h2>
                                <button type="button" class="add-item-btn" id="addThinkingBtn">
                                    <i class="fas fa-plus"></i> 添加联想
                                </button>
                            </div>
                            <div class="tags-container" id="thinkingContainer">
                                <!-- 预设一些诊断联想 -->
                                <div class="tag-item" data-category="thinking">
                                    <span class="tag-text">考虑良性结节</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="tag-item" data-category="thinking">
                                    <span class="tag-text">结合BRADS分级</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tag-input-group" id="thinkingInputGroup" style="display: none;">
                                <input type="text" class="tag-input" placeholder="输入诊断联想内容" maxlength="50">
                                <button type="button" class="tag-confirm-btn">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button type="button" class="tag-cancel-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="preset-tags">
                                <span class="preset-label">常用联想：</span>
                                <button type="button" class="preset-tag" data-text="需要进一步检查">需要进一步检查</button>
                                <button type="button" class="preset-tag" data-text="建议定期复查">建议定期复查</button>
                                <button type="button" class="preset-tag" data-text="考虑恶性可能">考虑恶性可能</button>
                                <button type="button" class="preset-tag" data-text="典型良性表现">典型良性表现</button>
                                <button type="button" class="preset-tag" data-text="需要病理确诊">需要病理确诊</button>
                            </div>
                        </section>

                        <!-- 诊断依据 -->
                        <section class="form-section">
                            <div class="section-header">
                                <h2><i class="fas fa-clipboard-list"></i> 诊断依据</h2>
                                <button type="button" class="add-item-btn" id="addBasisBtn">
                                    <i class="fas fa-plus"></i> 添加依据
                                </button>
                            </div>
                            <div class="tags-container" id="basisContainer">
                                <!-- 预设一些诊断依据 -->
                                <div class="tag-item" data-category="basis">
                                    <span class="tag-text">无钙化表现</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                                <div class="tag-item" data-category="basis">
                                    <span class="tag-text">血流信号正常</span>
                                    <button type="button" class="tag-remove">
                                        <i class="fas fa-times"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="tag-input-group" id="basisInputGroup" style="display: none;">
                                <input type="text" class="tag-input" placeholder="输入诊断依据" maxlength="50">
                                <button type="button" class="tag-confirm-btn">
                                    <i class="fas fa-check"></i>
                                </button>
                                <button type="button" class="tag-cancel-btn">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                            <div class="preset-tags">
                                <span class="preset-label">常用依据：</span>
                                <button type="button" class="preset-tag" data-text="大小稳定">大小稳定</button>
                                <button type="button" class="preset-tag" data-text="形态不规则">形态不规则</button>
                                <button type="button" class="preset-tag" data-text="周围组织浸润">周围组织浸润</button>
                                <button type="button" class="preset-tag" data-text="淋巴结肿大">淋巴结肿大</button>
                                <button type="button" class="preset-tag" data-text="增强扫描异常">增强扫描异常</button>
                            </div>
                        </section>

                        <!-- 诊断结果 -->
                        <section class="form-section">
                            <h2><i class="fas fa-diagnoses"></i> 诊断结果</h2>
                            <div class="diagnosis-grid">
                                <div class="diagnosis-category">
                                    <h3>诊断分类</h3>
                                    <div class="radio-group">
                                        <label class="radio-label">
                                            <input type="radio" name="diagnosisType" value="normal" required>
                                            <span class="radio-custom"></span>
                                            正常
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="diagnosisType" value="benign" required>
                                            <span class="radio-custom"></span>
                                            良性
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="diagnosisType" value="malignant" required>
                                            <span class="radio-custom"></span>
                                            恶性
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="diagnosisType" value="uncertain" required>
                                            <span class="radio-custom"></span>
                                            未定
                                        </label>
                                        <label class="radio-label">
                                            <input type="radio" name="diagnosisType" value="other" required>
                                            <span class="radio-custom"></span>
                                            其他
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <!-- 诊断依据 - 仅在良性或恶性时显示 -->
                        <section class="form-section" id="diagnosisBasisSection" style="display: none;">
                            <h2><i class="fas fa-clipboard-list"></i> 诊断依据</h2>
                            <div class="form-group">
                                <textarea id="diagnosisBasis" name="diagnosisBasis"
                                    placeholder="请详细描述诊断依据，如影像学特征、病理表现等..." rows="4"></textarea>
                            </div>
                        </section>

                        <!-- 备注 - 仅在未定或其他时显示 -->
                        <section class="form-section" id="remarksSection" style="display: none;">
                            <h2><i class="fas fa-comment"></i> 备注说明</h2>
                            <div class="form-group">
                                <textarea id="remarks" name="remarks" placeholder="请说明选择未定或其他的原因..."
                                    rows="3"></textarea>
                            </div>
                        </section>

                        <!-- 病史信息 - 选填 -->
                        <section class="form-section">
                            <h2><i class="fas fa-history"></i> 病史信息 <span class="optional-label">(选填)</span></h2>
                            <div class="form-group">
                                <textarea id="medicalHistory" name="medicalHistory"
                                    placeholder="如有完整病史信息，请在此填写，包括既往病史、家族史、用药史等..." rows="4"></textarea>
                            </div>
                        </section>

                        <!-- 提交按钮 -->
                        <section class="form-actions">
                            <button type="button" class="btn btn-secondary" id="previewBtn">
                                <i class="fas fa-eye"></i> 预览数据
                            </button>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> 保存数据
                            </button>
                            <button type="button" class="btn btn-secondary" id="resetBtn">
                                <i class="fas fa-redo"></i> 重置表单
                            </button>
                        </section>
                    </form>
                </div>

                <!-- 数据管理页面 -->
                <div id="data-management-page" class="page-content">
                    <div class="page-header">
                        <h2>数据管理</h2>
                        <div class="page-actions">
                            <button class="btn btn-primary">
                                <i class="fas fa-plus"></i> 新增数据
                            </button>
                            <button class="btn btn-secondary">
                                <i class="fas fa-download"></i> 导出数据
                            </button>
                        </div>
                    </div>

                    <div class="data-table-container">
                        <div class="table-filters">
                            <div class="filter-group">
                                <label>图像类型：</label>
                                <select class="filter-select">
                                    <option value="">全部</option>
                                    <option value="ultrasound">乳腺超声</option>
                                    <option value="ct">CT</option>
                                    <option value="mri">MRI</option>
                                    <option value="xray">X光</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>诊断状态：</label>
                                <select class="filter-select">
                                    <option value="">全部</option>
                                    <option value="completed">已完成</option>
                                    <option value="pending">待处理</option>
                                    <option value="reviewing">审核中</option>
                                </select>
                            </div>
                            <div class="filter-group">
                                <label>搜索：</label>
                                <input type="text" class="filter-input" placeholder="搜索患者ID或诊断内容">
                            </div>
                        </div>

                        <div class="data-table">
                            <table>
                                <thead>
                                    <tr>
                                        <th>ID</th>
                                        <th>图像类型</th>
                                        <th>上传时间</th>
                                        <th>诊断分类</th>
                                        <th>详细诊断</th>
                                        <th>状态</th>
                                        <th>操作</th>
                                    </tr>
                                </thead>
                                <tbody id="dataTableBody">
                                    <tr>
                                        <td>001</td>
                                        <td>乳腺超声</td>
                                        <td>2024-01-15 14:30</td>
                                        <td><span class="status-badge status-benign">良性</span></td>
                                        <td>良性结节，BRADS 3类</td>
                                        <td><span class="status-badge status-completed">已完成</span></td>
                                        <td>
                                            <button class="action-btn view-btn" title="查看">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="action-btn edit-btn" title="编辑">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete-btn" title="删除">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td>002</td>
                                        <td>CT</td>
                                        <td>2024-01-15 15:45</td>
                                        <td><span class="status-badge status-uncertain">未定</span></td>
                                        <td>需要进一步检查</td>
                                        <td><span class="status-badge status-reviewing">审核中</span></td>
                                        <td>
                                            <button class="action-btn view-btn" title="查看">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                            <button class="action-btn edit-btn" title="编辑">
                                                <i class="fas fa-edit"></i>
                                            </button>
                                            <button class="action-btn delete-btn" title="删除">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <div class="table-pagination">
                            <div class="pagination-info">
                                显示 1-10 条，共 156 条记录
                            </div>
                            <div class="pagination-controls">
                                <button class="pagination-btn" disabled>
                                    <i class="fas fa-chevron-left"></i>
                                </button>
                                <button class="pagination-btn active">1</button>
                                <button class="pagination-btn">2</button>
                                <button class="pagination-btn">3</button>
                                <button class="pagination-btn">
                                    <i class="fas fa-chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 图像分析页面 - 现代化医学图像标注系统 -->
                <div id="image-analysis-page" class="page-content">
                    <!-- 现代化工作区 -->
                    <div class="modern-workspace">
                        <!-- 左侧面板：病例输入 -->
                        <div class="modern-panel left-panel">
                            <div class="panel-header">
                                <h2 class="panel-title">
                                    <i class="fas fa-edit"></i>
                                    病例输入
                                </h2>
                            </div>
                            <div class="panel-content">
                                <!-- 临床症状描述 -->
                                <div class="form-group">
                                    <label class="form-label">临床症状描述</label>
                                    <textarea class="modern-textarea" id="clinicalQuestion"
                                        placeholder="请详细描述患者的临床症状、病史及检查目的...&#10;&#10;例如：患者女性，45岁，主诉右乳肿块2周，质地较硬，边界不清，无疼痛。既往无乳腺疾病史，家族史无特殊。"></textarea>
                                </div>

                                <!-- 医学影像上传 -->
                                <div class="form-group">
                                    <label class="form-label">医学影像上传</label>
                                    <div class="modern-upload-area" id="annotationUploadArea">
                                        <div class="upload-content" id="uploadPlaceholder">
                                            <div class="upload-icon">
                                                <i class="fas fa-cloud-upload-alt"></i>
                                            </div>
                                            <div class="upload-text">点击上传或拖拽文件至此</div>
                                            <div class="upload-hint">支持 JPG、PNG、DICOM 格式</div>
                                            <input type="file" id="annotationImageInput"
                                                accept=".jpg,.jpeg,.png,.dcm,.dicom" multiple hidden>
                                        </div>

                                        <!-- 缩略图网格 -->
                                        <div class="thumbnail-grid" id="uploadedImagesList" style="display: none;">
                                            <div class="thumbnail-list" id="thumbnailList">
                                                <!-- 缩略图将在这里动态生成 -->
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 操作按钮 -->
                                <div class="action-group">
                                    <button class="modern-btn secondary" id="clearInputBtn">
                                        <i class="fas fa-refresh"></i>
                                        重置所有
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- 中间面板：影像分析 -->
                        <div class="modern-panel center-panel">
                            <div class="modern-image-header">
                                <h2 class="modern-image-title">
                                    <i class="fas fa-image"></i>
                                    影像分析
                                </h2>
                                <div class="modern-image-controls" id="imageControls" style="display: none;">
                                    <button class="modern-control-btn" id="prevImageBtn" title="上一张">
                                        <i class="fas fa-chevron-left"></i>
                                    </button>
                                    <span class="modern-image-counter" id="imageCounter">1 / 1</span>
                                    <button class="modern-control-btn" id="nextImageBtn" title="下一张">
                                        <i class="fas fa-chevron-right"></i>
                                    </button>

                                    <!-- 图像缩放控制 -->
                                    <div class="image-zoom-controls">
                                        <button class="zoom-btn" id="zoomOutBtn" title="缩小">
                                            <i class="fas fa-search-minus"></i>
                                        </button>
                                        <span class="zoom-level" id="zoomLevel">100%</span>
                                        <button class="zoom-btn" id="zoomInBtn" title="放大">
                                            <i class="fas fa-search-plus"></i>
                                        </button>
                                        <button class="zoom-btn" id="resetZoomBtn" title="重置缩放">
                                            <i class="fas fa-expand-arrows-alt"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>

                            <!-- 标注工具栏 - 始终可见 -->
                            <div class="modern-annotation-toolbar">
                                <div class="modern-tool-group">
                                    <button class="modern-tool-btn active" data-tool="select" title="选择工具">
                                        <i class="fas fa-mouse-pointer"></i>
                                        <span class="tool-label">选择</span>
                                    </button>
                                    <button class="modern-tool-btn" data-tool="rectangle" title="矩形标注框">
                                        <i class="fas fa-square"></i>
                                        <span class="tool-label">标注框</span>
                                    </button>
                                    <button class="modern-tool-btn" data-tool="circle" title="圆形标注">
                                        <i class="fas fa-circle"></i>
                                        <span class="tool-label">圆形</span>
                                    </button>
                                    <button class="modern-tool-btn" data-tool="arrow" title="箭头指示">
                                        <i class="fas fa-location-arrow"></i>
                                        <span class="tool-label">指示点</span>
                                    </button>
                                    <button class="modern-tool-btn" data-tool="text" title="文本标注">
                                        <i class="fas fa-font"></i>
                                        <span class="tool-label">文本框</span>
                                    </button>
                                    <button class="modern-tool-btn" data-tool="pen" title="自由绘制">
                                        <i class="fas fa-pen"></i>
                                        <span class="tool-label">画笔</span>
                                    </button>
                                </div>
                                <div class="modern-toolbar-actions">
                                    <button class="modern-btn secondary" id="undoAnnotationBtn" title="撤销上一步">
                                        <i class="fas fa-undo"></i>
                                        <span>撤销</span>
                                    </button>
                                    <button class="modern-btn secondary" id="clearAnnotationsBtn" title="清除所有标注">
                                        <i class="fas fa-eraser"></i>
                                        <span>清除</span>
                                    </button>
                                    <button class="modern-btn primary" id="saveAnnotationsBtn" title="保存标注">
                                        <i class="fas fa-save"></i>
                                        <span>保存</span>
                                    </button>
                                </div>
                            </div>

                            <!-- 图像工作区 -->
                            <div class="image-workspace" id="imageWorkspace" style="display: none;">
                                <div class="modern-image-container">
                                    <canvas class="modern-annotation-canvas" id="annotationCanvas"></canvas>
                                    <img class="modern-current-image" id="currentImage" alt="医学图像">
                                </div>
                            </div>

                            <!-- 空状态 -->
                            <div class="modern-empty-state" id="emptyState">
                                <div class="modern-empty-icon">
                                    <i class="fas fa-image"></i>
                                </div>
                                <div class="modern-empty-title">请上传医学图像</div>
                                <div class="modern-empty-description">上传图像后开始标注分析</div>
                            </div>
                        </div>

                        <!-- 右侧面板：标注管理 -->
                        <div class="modern-panel right-panel">
                            <div class="panel-header">
                                <h2 class="panel-title">
                                    <i class="fas fa-tags"></i>
                                    标注管理
                                </h2>
                            </div>
                            <div class="panel-content">
                                <!-- 标注列表 -->
                                <div class="modern-annotation-section">
                                    <div class="modern-section-header">
                                        <h3 class="modern-section-title">当前标注</h3>
                                        <span class="modern-annotation-count" id="annotationCount">0</span>
                                    </div>
                                    <div class="modern-annotation-list" id="annotationList">
                                        <div class="modern-annotation-empty">
                                            <i class="fas fa-tags"></i>
                                            <p>暂无标注</p>
                                        </div>
                                    </div>
                                </div>

                                <!-- 快速操作 -->
                                <div class="modern-quick-actions">
                                    <div class="modern-section-header">
                                        <h3 class="modern-section-title">快速操作</h3>
                                    </div>
                                    <div class="modern-quick-actions-content">
                                        <button class="modern-quick-btn" id="clearAllBtn">
                                            <i class="fas fa-trash-alt"></i>
                                            <span>清除所有标注</span>
                                        </button>
                                        <button class="modern-quick-btn" id="exportAnnotationsBtn">
                                            <i class="fas fa-file-export"></i>
                                            <span>导出标注数据</span>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="diagnosis-review-page" class="page-content">
                    <div class="page-header">
                        <h2>诊断审核</h2>
                        <p class="page-description">诊断结果审核和质量控制</p>
                    </div>
                    <div class="coming-soon">
                        <i class="fas fa-clipboard-check"></i>
                        <h3>功能开发中</h3>
                        <p>诊断审核功能正在开发中，敬请期待</p>
                    </div>
                </div>

                <div id="reports-page" class="page-content">
                    <div class="page-header">
                        <h2>统计报告</h2>
                        <p class="page-description">数据统计和分析报告</p>
                    </div>

                    <!-- 报告选项卡 -->
                    <div class="report-tabs">
                        <button class="report-tab active" data-tab="workflow-report">
                            <i class="fas fa-sitemap"></i>
                            <span>工作流程报告</span>
                        </button>
                        <button class="report-tab" data-tab="data-statistics">
                            <i class="fas fa-chart-bar"></i>
                            <span>数据统计</span>
                        </button>
                        <button class="report-tab" data-tab="quality-analysis">
                            <i class="fas fa-clipboard-check"></i>
                            <span>质量分析</span>
                        </button>
                    </div>

                    <!-- 工作流程报告内容 -->
                    <div id="workflow-report" class="report-content active">
                        <div class="workflow-document">
                            <div class="document-header">
                                <h1>医学图像数据采集与标注流程</h1>
                                <h2>系统设计与实现文档</h2>
                            </div>

                            <div class="doc-info">
                                <table>
                                    <tr>
                                        <td><strong>文档版本：</strong></td>
                                        <td>v1.0</td>
                                    </tr>
                                    <tr>
                                        <td><strong>创建日期：</strong></td>
                                        <td>2025年7月11日</td>
                                    </tr>
                                    <tr>
                                        <td><strong>文档类型：</strong></td>
                                        <td>系统设计说明书</td>
                                    </tr>
                                    <tr>
                                        <td><strong>适用范围：</strong></td>
                                        <td>医学图像数据采集管理系统</td>
                                    </tr>
                                </table>
                            </div>

                            <div class="toc">
                                <h3>📋 目录</h3>
                                <ol>
                                    <li><a href="#overview">项目概述</a></li>
                                    <li><a href="#architecture">系统架构</a></li>
                                    <li><a href="#workflow">工作流程详述</a></li>
                                    <li><a href="#implementation">技术实现</a></li>
                                    <li><a href="#data-structure">数据结构设计</a></li>
                                    <li><a href="#value">应用价值分析</a></li>
                                    <li><a href="#future">未来发展规划</a></li>
                                    <li><a href="#conclusion">总结</a></li>
                                </ol>
                            </div>

                            <div class="section" id="overview">
                                <h2>1. 项目概述</h2>

                                <h3>1.1 项目背景</h3>
                                <p>随着人工智能在医学影像诊断领域的快速发展，高质量的标注数据成为训练优秀AI模型的关键要素。传统的医学图像数据采集和标注流程往往存在以下问题：</p>

                                <div class="feature-grid">
                                    <div class="feature-card">
                                        <h4>🔄 流程分散</h4>
                                        <p>图像采集、标注、诊断录入分别在不同系统中进行</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>📊 数据不一致</h4>
                                        <p>缺乏统一的数据格式和标准</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>⚡ 效率低下</h4>
                                        <p>重复录入信息，工作流程不够流畅</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>🎯 质量难控</h4>
                                        <p>缺乏有效的数据验证和质量控制机制</p>
                                    </div>
                                </div>

                                <h3>1.2 项目目标</h3>
                                <p>本项目旨在构建一个集成化的医学图像数据采集与标注管理系统，实现：</p>
                                <ul>
                                    <li><strong>一体化工作流</strong>：将图像上传、标注、诊断录入整合为统一流程</li>
                                    <li><strong>标准化数据</strong>：建立统一的数据格式和存储标准</li>
                                    <li><strong>智能化操作</strong>：提供便捷的用户界面和智能辅助功能</li>
                                    <li><strong>高质量输出</strong>：确保生成的训练数据符合AI模型训练要求</li>
                                </ul>
                            </div>

                            <div class="section" id="architecture">
                                <h2>2. 系统架构</h2>

                                <h3>2.1 整体架构</h3>
                                <p>系统采用模块化设计，主要包含以下核心模块：</p>

                                <div class="stage">
                                    <h3>🖥️ 前端展示层</h3>
                                    <ul>
                                        <li>数据采集界面</li>
                                        <li>图像标注界面</li>
                                        <li>数据管理界面</li>
                                        <li>系统控制面板</li>
                                    </ul>
                                </div>

                                <div class="stage">
                                    <h3>⚙️ 业务逻辑层</h3>
                                    <ul>
                                        <li>图像处理模块</li>
                                        <li>标注管理模块</li>
                                        <li>数据验证模块</li>
                                        <li>工作流控制模块</li>
                                    </ul>
                                </div>

                                <div class="stage">
                                    <h3>💾 数据存储层</h3>
                                    <ul>
                                        <li>本地存储（LocalStorage）</li>
                                        <li>会话存储（SessionStorage）</li>
                                        <li>文件系统存储</li>
                                    </ul>
                                </div>
                            </div>

                            <div class="section" id="workflow">
                                <h2>3. 工作流程详述</h2>

                                <div class="flow-step">
                                    <h4>🔵 第一阶段：数据采集页面</h4>
                                    <p><strong>图像上传</strong> → <strong>基础信息录入</strong> → <strong>标注选项决策</strong></p>
                                </div>

                                <div class="flow-step">
                                    <h4>🟢 第二阶段：图像分析页面（可选）</h4>
                                    <p><strong>选择标注工具</strong> → <strong>图像标注操作</strong> → <strong>标注管理</strong> →
                                        <strong>保存标注</strong> → <strong>返回数据采集</strong>
                                    </p>
                                </div>

                                <div class="flow-step">
                                    <h4>🔴 第三阶段：诊断数据录入</h4>
                                    <p><strong>图像特征分析</strong> → <strong>诊断联想录入</strong> → <strong>诊断依据记录</strong> →
                                        <strong>诊断结果确定</strong> → <strong>数据验证提交</strong>
                                    </p>
                                </div>

                                <h3>3.1 标注工具介绍</h3>
                                <div class="feature-grid">
                                    <div class="feature-card">
                                        <h4>🔲 矩形标注框</h4>
                                        <p>用于标记规则的病灶区域，适用于结节、肿块等规则病灶</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>⭕ 圆形标注</h4>
                                        <p>用于标记圆形病灶，适用于囊肿、圆形结节等</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>➡️ 箭头指示点</h4>
                                        <p>用于指向关键特征，适用于钙化点、血管等细小结构</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>📝 文本标注框</h4>
                                        <p>用于添加文字说明，适用于病灶描述、测量数据等</p>
                                    </div>
                                </div>

                                <h3>3.2 诊断分类系统</h3>
                                <table class="diagnosis-table">
                                    <thead>
                                        <tr>
                                            <th>分类</th>
                                            <th>描述</th>
                                            <th>后续处理</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>正常</td>
                                            <td>无异常发现</td>
                                            <td>常规随访</td>
                                        </tr>
                                        <tr>
                                            <td>良性</td>
                                            <td>良性病变</td>
                                            <td>定期复查</td>
                                        </tr>
                                        <tr>
                                            <td>恶性</td>
                                            <td>恶性病变</td>
                                            <td>积极治疗</td>
                                        </tr>
                                        <tr>
                                            <td>未定</td>
                                            <td>需进一步检查</td>
                                            <td>补充检查</td>
                                        </tr>
                                        <tr>
                                            <td>其他</td>
                                            <td>其他情况</td>
                                            <td>个体化处理</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>

                            <div class="section" id="data-structure">
                                <h2>5. 数据结构设计</h2>

                                <h3>5.1 完整数据模型</h3>
                                <div class="data-structure">
                                    <h4>📊 结构化诊断数据</h4>
                                    <div class="code-block">
                                        {
                                        "id": "CASE-2025-001",
                                        "fileName": "breast_ultrasound_001.jpg",
                                        "basicInfo": {
                                        "bodyPart": "breast",
                                        "crossSection": "transverse",
                                        "lesionType": "nodule"
                                        },
                                        "annotations": [
                                        {
                                        "id": 1,
                                        "type": "rectangle",
                                        "coordinates": { "x": 150, "y": 200, "width": 80, "height": 60 },
                                        "text": "低回声结节"
                                        }
                                        ],
                                        "imageFeatures": ["边界清晰", "回声均匀", "形态规则"],
                                        "diagnosticThinking": ["考虑良性结节", "BI-RADS 3类"],
                                        "diagnosticBasis": ["边界清晰完整", "内部回声均匀"],
                                        "diagnosisResult": {
                                        "type": "benign",
                                        "detailedDiagnosis": "乳腺良性结节，建议随访"
                                        }
                                        }
                                    </div>
                                </div>
                            </div>

                            <div class="section" id="value">
                                <h2>8. 应用价值分析</h2>

                                <div class="value-card">
                                    <h4>🤖 医学AI训练价值</h4>
                                    <p>提供标准化的数据格式、精确的标注信息、丰富的特征标签和完整的诊断信息</p>
                                </div>

                                <div class="value-card">
                                    <h4>🏥 临床应用价值</h4>
                                    <p>实现诊断流程标准化、提升质量控制水平、规范化诊断步骤</p>
                                </div>

                                <div class="value-card">
                                    <h4>🔬 科研支持价值</h4>
                                    <p>支持大数据分析、便于数据挖掘、促进知识积累和临床模式识别</p>
                                </div>
                            </div>

                            <div class="section" id="future">
                                <h2>9. 未来发展规划</h2>

                                <div class="feature-grid">
                                    <div class="feature-card">
                                        <h4>🤖 AI辅助功能</h4>
                                        <ul>
                                            <li>自动病灶检测</li>
                                            <li>智能标注建议</li>
                                            <li>诊断辅助提示</li>
                                        </ul>
                                    </div>
                                    <div class="feature-card">
                                        <h4>👥 协作功能</h4>
                                        <ul>
                                            <li>多专家协同标注</li>
                                            <li>标注质量评估</li>
                                            <li>专家意见汇总</li>
                                        </ul>
                                    </div>
                                    <div class="feature-card">
                                        <h4>☁️ 云端集成</h4>
                                        <ul>
                                            <li>云端数据存储</li>
                                            <li>实时数据同步</li>
                                            <li>跨设备访问</li>
                                        </ul>
                                    </div>
                                    <div class="feature-card">
                                        <h4>📱 移动端支持</h4>
                                        <ul>
                                            <li>移动设备适配</li>
                                            <li>触屏操作优化</li>
                                            <li>离线功能支持</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>

                            <div class="section" id="conclusion">
                                <h2>10. 总结</h2>

                                <div class="highlight">
                                    <p><strong>本医学图像数据采集与标注系统通过集成化的设计理念，将传统分散的工作流程整合为统一的操作平台。</strong></p>
                                </div>

                                <h3>核心优势</h3>
                                <div class="feature-grid">
                                    <div class="feature-card">
                                        <h4>🚀 技术先进性</h4>
                                        <p>采用现代化的前端技术栈，模块化的系统架构设计，标准化的数据处理流程</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>👨‍💻 用户体验优秀</h4>
                                        <p>直观简洁的用户界面，流畅便捷的操作流程，智能化的辅助功能</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>📊 数据质量可靠</h4>
                                        <p>多层次的数据验证机制，标准化的数据格式，完整的质量控制体系</p>
                                    </div>
                                    <div class="feature-card">
                                        <h4>💎 应用价值显著</h4>
                                        <p>为医学AI提供高质量训练数据，提升临床诊断工作效率，支持医学科研数据分析</p>
                                    </div>
                                </div>

                                <p>该系统为医学图像数据的采集、标注和管理提供了完整的解决方案，具有重要的临床应用价值和科研意义。随着人工智能技术在医学领域的深入应用，本系统将为推动医学AI的发展做出重要贡献。
                                </p>
                            </div>

                            <div class="footer">
                                <p><strong>文档结束</strong></p>
                                <p><em>本文档详细阐述了医学图像数据采集与标注系统的设计理念、技术实现和应用价值，为系统的开发、部署和应用提供了全面的指导。</em></p>
                            </div>
                        </div>
                    </div>

                    <!-- 数据统计内容 -->
                    <div id="data-statistics" class="report-content">
                        <div class="coming-soon">
                            <i class="fas fa-chart-bar"></i>
                            <h3>数据统计功能开发中</h3>
                            <p>数据统计分析功能正在开发中，敬请期待</p>
                        </div>
                    </div>

                    <!-- 质量分析内容 -->
                    <div id="quality-analysis" class="report-content">
                        <div class="coming-soon">
                            <i class="fas fa-clipboard-check"></i>
                            <h3>质量分析功能开发中</h3>
                            <p>质量分析功能正在开发中，敬请期待</p>
                        </div>
                    </div>
                </div>

                <!-- 模型评分页面 -->
                <div id="model-scoring-page" class="page-content">
                    <div class="page-header">
                        <h2>医学模型评分</h2>
                        <p class="page-description">基于Likert 5分制的多维度质量评估系统</p>
                    </div>

                    <!-- 模型评分内容容器 -->
                    <div id="modelScoringContainer">
                        <!-- 评分内容将通过JavaScript动态加载 -->
                        <div class="loading-placeholder">
                            <i class="fas fa-spinner fa-spin"></i>
                            <p>正在加载评分系统...</p>
                        </div>
                    </div>
                </div>

                <div id="settings-page" class="page-content">
                    <div class="page-header">
                        <h2>系统设置</h2>
                        <p class="page-description">系统配置和参数设置</p>
                    </div>
                    <div class="coming-soon">
                        <i class="fas fa-cog"></i>
                        <h3>功能开发中</h3>
                        <p>系统设置功能正在开发中，敬请期待</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 预览模态框 -->
    <div id="previewModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>数据预览</h2>
                <button class="close-btn" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body" id="previewContent">
                <!-- 预览内容将在这里动态生成 -->
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>

</html>